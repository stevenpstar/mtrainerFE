var v=Math.pow;var S=25,h=.1,f=[],d=0,A;function y(e){f=e,d=0}var s=!1;function N(e,n,l,c,r,o){let t=60/c,u=0;r.forEach((i,a)=>B(e,n+(r[a].Beat-1)*t,l,i,t)),o()}function b(e,n,l,c,r){let o=60/c;s=!0;let t=n+(f[d].Beat-1)*o;e.currentTime+h>=t&&(B(e,t,l,f[d],o),d++,d>=f.length&&(p(),r())),s&&(A=setTimeout(()=>b(e,n,l,c,r),S))}function p(){clearTimeout(A),d=0,s=!1}function B(e,n,l,c,r){let o=e.createBufferSource(),t=e.createGain();t.gain.setValueAtTime(.25,n),o.buffer=l,o.playbackRate.value=I(69,c.MidiNote),o.connect(t).connect(e.destination),o.start(n),t.gain.linearRampToValueAtTime(0,n+c.Duration*r)}function I(e=69,n){return v(2,(n-e)/12)}function x(e,n,l,c){let r=60/c;for(let o=0;o<l;o++){let t=n+r*o,u=n+r*o+.2,i=e.createOscillator(),a=e.createGain();i.frequency.value=o===0?600:500,a.gain.setValueAtTime(.5,t),i.connect(a).connect(e.destination),i.start(t),i.stop(u)}}var P;(t=>{function e(){}t.CreateSinth=e;function n(u,i,a,m){b(u,u.currentTime,i,a,m)}t.play=n;function l(u,i,a,m,T){N(u,u.currentTime,i,a,m,T)}t.playFull=l;function c(u,i,a){x(u,u.currentTime,i,a)}t.playMetronome=c;function r(){p()}t.stop=r;function o(u){y(u)}t.initplay=o})(P||(P={}));export{P as Sinth};
//# sourceMappingURL=main.mjs.map