var v=Math.pow;var T=25,h=.1,f=[],l=0,A;function x(e){f=e,l=0}var m=!1;function y(e,n,c,u,i){let t=60/c,a=0;u.forEach((o,r)=>N(e,(u[r].Beat-1)*t,n,o,t)),i()}function b(e,n,c,u){let i=60/c;m=!0;let t=(f[l].Beat-1)*i;e.currentTime+h>=t&&(N(e,t,n,f[l],i),l++,l>=f.length&&(p(),u())),m&&(A=setTimeout(()=>b(e,n,c,u),T))}function p(){clearTimeout(A),l=0,m=!1}function N(e,n,c,u,i){let t=e.createBufferSource(),a=e.createGain();a.gain.setValueAtTime(.25,n),t.buffer=c,t.playbackRate.value=w(69,u.MidiNote),t.connect(a).connect(e.destination),t.start(n),a.gain.linearRampToValueAtTime(0,n+u.Duration*i)}function w(e=69,n){return v(2,(n-e)/12)}function B(e,n,c){let u=60/c;for(let i=0;i<n;i++){let t=u*i,a=u*i+.2,o=e.createOscillator(),r=e.createGain();o.frequency.value=i===0?600:500,r.gain.setValueAtTime(.5,t),o.connect(r).connect(e.destination),o.start(t),o.stop(a)}}var P;(a=>{function e(){}a.CreateSinth=e;function n(o,r,d){let s=new AudioContext;b(s,o,r,d)}a.play=n;function c(o,r,d,s){let S=new AudioContext;y(S,o,r,d,s)}a.playFull=c;function u(o,r){let d=new AudioContext;B(d,o,r)}a.playMetronome=u;function i(){p()}a.stop=i;function t(o){x(o)}a.initplay=t})(P||(P={}));export{P as Sinth};
//# sourceMappingURL=main.mjs.map